ishammadkhan
ishammadkhan
Sharing their screen

ishammadkhan — 7/8/2024 4:52 PM
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
ishammadkhan — 7/8/2024 5:58 PM
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
ishammadkhan — 7/8/2024 6:29 PM
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
ishammadkhan — 7/9/2024 1:39 AM
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
ishammadkhan — 7/9/2024 2:00 AM
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
ishammadkhan — 7/9/2024 4:02 AM
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
ishammadkhan — 7/9/2024 4:56 AM
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
Teen content and onlyfans leaks here :peach: :underage: : https://discord.gg/xxxmilf @everyone @here
avelinoxqc333 — 7/12/2024 3:15 PM
areeee delete this account man wtf
avelinoxqc333 — 7/11/2025 10:42 PM
yoyoyo
ishammadkhan — 7/19/2025 9:21 PM
Yoyoyooo
I think aac is fine now
avelinoxqc333 — 7/27/2025 5:08 AM
nice
avelinoxqc333
 started a call that lasted an hour. — 12/3/2025 11:06 PM
avelinoxqc333 — 12/3/2025 11:58 PM
will watch this tomorrow
good night
avelinoxqc333
 started a call that lasted 3 minutes. — 12/22/2025 12:51 AM
ishammadkhan — 12/22/2025 12:52 AM
can you hear me >
ishammadkhan
 started a call that lasted 2 hours. — 12/22/2025 12:54 AM
ishammadkhan — 12/22/2025 1:06 AM
bro
ishammadkhan
 started a call that lasted a few seconds. — 12/22/2025 11:20 PM
avelinoxqc333
 started a call that lasted 16 minutes. — 12/22/2025 11:23 PM
ishammadkhan — 12/22/2025 11:23 PM
Can you hear me
Chut
avelinoxqc333 — 12/22/2025 11:39 PM
https://discord.gg/Fr78fMgc
https://discord.gg/yYnE4wbs
avelinoxqc333 — 12/30/2025 11:44 PM
https://discord.gg/mQj9tbgq
ishammadkhan
 started a call that lasted a few seconds. — 1/14/2026 10:15 PM
avelinoxqc333 — 1/14/2026 10:20 PM
https://discord.gg/j2duze58
avelinoxqc333 — 12:18 AM
https://discord.gg/j2duze58
avelinoxqc333
 started a call that lasted a few seconds. — 9:36 PM
avelinoxqc333
 started a call that lasted 7 minutes. — 9:44 PM
avelinoxqc333
 started a call that lasted a few seconds. — 10:32 PM
ishammadkhan
 started a call that lasted a few seconds. — 10:36 PM
ishammadkhan
 started a call that lasted 3 minutes. — 10:38 PM
ishammadkhan
 started a call that lasted a few seconds. — 10:41 PM
ishammadkhan
 started a call that lasted 2 minutes. — 10:42 PM
ishammadkhan
 started a call that lasted a few seconds. — 10:47 PM
You missed a call from 
avelinoxqc333
 that lasted a few seconds. — 10:49 PM
avelinoxqc333
 started a call. — 10:49 PM
avelinoxqc333 — 11:21 PM
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Draft Auction Arena</title>
Expand
message.txt
32 KB
﻿
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Draft Auction Arena</title>
  <style>
    :root{
      --bg0:#05070c;
      --bg1:#0b1020;
      --card:#0f1a33;
      --card2:#0c1530;
      --stroke:#22325c;
      --text:#eaf0ff;
      --muted:#9bb0e6;
      --good:#44e3a5;
      --warn:#ffcc66;
      --bad:#ff5c7a;
      --accent:#2f6bff;
      --accent2:#8a5cff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 20% -10%, rgba(47,107,255,.35), transparent 60%),
                  radial-gradient(1000px 650px at 85% 15%, rgba(138,92,255,.30), transparent 55%),
                  linear-gradient(180deg, var(--bg0), var(--bg1));
      color: var(--text);
      min-height: 100vh;
    }
    header{
      padding: 18px 20px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.01));
      position: sticky;
      top: 0;
      backdrop-filter: blur(10px);
      z-index: 10;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      max-width: 1200px; margin:0 auto;
    }
    .logo{
      width:44px;height:44px;border-radius:14px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      display:grid;place-items:center;
      box-shadow: 0 12px 30px rgba(47,107,255,.25);
      font-weight:900;
    }
    .brand h1{
      font-size: 18px; margin:0; letter-spacing:.5px;
    }
    .brand p{
      margin:2px 0 0 0; color: var(--muted); font-size: 12px;
    }
    main{
      max-width: 1200px;
      margin: 0 auto;
      padding: 18px 20px 34px;
    }

    .grid{
      display:grid;
      grid-template-columns: 360px 1fr;
      gap: 16px;
    }

    .panel{
      border: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-radius: 18px;
      padding: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .panel h2{
      margin: 4px 0 10px;
      font-size: 14px;
      letter-spacing:.4px;
      color: #dfe8ff;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
    }
    .pill{
      font-size: 12px; color: var(--muted);
      border: 1px solid rgba(255,255,255,.12);
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(0,0,0,.15);
    }

    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    label{font-size:12px; color: var(--muted)}
    input, button, select{
      font: inherit;
    }
    input{
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(3,6,14,.65);
      color: var(--text);
      outline: none;
    }
    input:focus{border-color: rgba(47,107,255,.65); box-shadow: 0 0 0 4px rgba(47,107,255,.18)}
    .btn{
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      user-select:none;
    }
    .btn:hover{background: rgba(255,255,255,.10)}
    .btn:active{transform: translateY(1px)}
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-color: rgba(255,255,255,.16);
      box-shadow: 0 10px 24px rgba(47,107,255,.22);
    }
    .btn.primary:hover{filter: brightness(1.05)}
    .btn.danger{
      background: rgba(255,92,122,.12);
      border-color: rgba(255,92,122,.25);
      color: #ffdbe3;
    }
    .btn.good{
      background: rgba(68,227,165,.12);
      border-color: rgba(68,227,165,.25);
      color: #d5fff0;
    }
    .btn.small{padding: 8px 10px; border-radius: 10px; font-size: 12px}

    .setup-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .setup-grid .full{grid-column: 1 / -1;}
    .hint{font-size:12px; color: var(--muted); margin-top: 8px; line-height:1.35}

    .auction-top{
      display:grid;
      grid-template-columns: 1fr 320px;
      gap: 16px;
      align-items: stretch;
    }

    .player-card{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02));
      overflow: hidden;
      display:grid;
      grid-template-columns: 240px 1fr;
      min-height: 220px;
      position: relative;
    }
    .player-photo{
      background: #07102a;
      display:grid; place-items:center;
      border-right: 1px solid rgba(255,255,255,.08);
      position: relative;
      overflow:hidden;
    }
    .player-photo img{
      width:100%;
      height:100%;
      object-fit: cover;
      filter: contrast(1.05) saturate(1.1);
    }
    .player-meta{
      padding: 14px 14px 12px;
      display:flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 10px;
    }
    .player-meta h3{
      margin: 0;
      font-size: 18px;
      letter-spacing:.3px;
    }
    .sub{
      color: var(--muted);
      font-size: 12px;
      margin-top: 4px;
    }

    .sold-badge{
      position:absolute;
      top: 14px;
      right: 14px;
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 800;
      letter-spacing: .8px;
      display:none;
      background: rgba(68,227,165,.18);
      border: 1px solid rgba(68,227,165,.35);
      color: #d5fff0;
      text-transform: uppercase;
    }
    .sold-badge.show{display:block}

    .bid-box{
      padding: 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      display:flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 10px;
    }
    .stat{
      display:flex; justify-content:space-between; align-items: baseline;
      padding: 10px 10px;
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 14px;
      background: rgba(0,0,0,.18);
    }
    .stat .k{font-size: 12px; color: var(--muted)}
    .stat .v{font-size: 18px; font-weight: 800}
    .stat .v.small{font-size: 14px; font-weight: 700; color: #dfe8ff}

    .teams{
      margin-top: 16px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }
    @media (max-width: 1050px){
      .grid{grid-template-columns: 1fr}
      .auction-top{grid-template-columns: 1fr}
      .player-card{grid-template-columns: 1fr}
      .teams{grid-template-columns: 1fr}
    }

    .team-card{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      padding: 12px;
      display:flex;
      flex-direction: column;
      gap: 10px;
    }
    .team-head{
      display:flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    .team-name{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .team-dot{
      width: 12px; height: 12px; border-radius: 4px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 8px 18px rgba(138,92,255,.18);
    }
    .wallet{
      font-size: 12px;
      color: var(--muted);
    }
    .wallet strong{
      color: var(--text);
      font-size: 14px;
      margin-left: 6px;
    }

    .bid-row{
      display:flex;
      gap: 10px;
      align-items:center;
    }
    .bid-row input{
      flex:1;
      min-width: 120px;
    }

    .roster{
      border-top: 1px solid rgba(255,255,255,.08);
      padding-top: 10px;
      display:flex;
      flex-direction: column;
      gap: 8px;
    }
    .roster h4{
      margin: 0;
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.4px;
      text-transform: uppercase;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      font-size: 12px;
      color: #dfe8ff;
      max-width: 100%;
    }
    .chip img{
      width: 22px; height: 22px; border-radius: 50%;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,.14);
    }
    .chip .price{
      margin-left:auto;
      color: var(--good);
      font-weight: 900;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.70);
      border: 1px solid rgba(255,255,255,.12);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 999px;
      font-size: 12px;
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease, transform .2s ease;
      z-index: 99;
      backdrop-filter: blur(8px);
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-4px);
    }

    .hidden{display:none !important;}
    .divider{height:1px;background:rgba(255,255,255,.08); margin: 10px 0;}
    .mini{font-size: 11px; color: var(--muted); line-height:1.35}
    .right-actions{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end}
  </style>
</head>

<body>
  <header>
    <div class="brand">
      <div class="logo">DA</div>
      <div>
        <h1>Draft Auction Arena</h1>
        <p>Fast, sporty player auction for captains — budgets, bids, sold, rosters.</p>
      </div>
    </div>
  </header>

  <main>
    <div class="grid">

      <!-- LEFT: SETUP / OWNER PANEL -->
      <section class="panel" id="leftPanel">
        <h2>
          Setup
          <span class="pill" id="phasePill">Not started</span>
        </h2>

        <div id="setupPane">
          <div class="setup-grid">
            <div>
              <label>Number of captains / teams</label>
              <input id="numTeams" type="number" min="2" max="20" value="4">
            </div>
            <div>
              <label>Number of players</label>
              <input id="numPlayers" type="number" min="1" max="300" value="20">
            </div>
            <div class="full">
              <label>Starting budget per team</label>
              <input id="startingBudget" type="number" min="1" max="1000000" value="100">
            </div>

            <div class="full">
              <label>Owner password (for “Owner: Mark Sold”)</label>
              <input id="ownerPassword" type="password" placeholder="Set a password (e.g., 1234)">
            </div>

            <div class="full">
              <button class="btn primary" id="btnStart">Start Auction</button>
            </div>
          </div>

          <p class="hint">
            After you start, the site generates players automatically (with sporty placeholder photos).
            If you want real player photos/names, I can modify it to import a CSV or upload images.
          </p>
        </div>

        <div id="ownerPane" class="hidden">
          <h2 style="margin-top:2px;">
            Auction Controls
            <span class="pill" id="playerCounterPill">Player 0/0</span>
          </h2>

          <div class="row" style="justify-content:space-between;">
            <button class="btn good" id="btnNoMoreBids">No more bids (Sell)</button>
            <button class="btn danger" id="btnOwnerSold">Owner: Mark Sold</button>
          </div>

          <div class="divider"></div>

          <div class="row" style="justify-content:space-between;">
            <button class="btn small" id="btnUndo">Undo last sale</button>
            <button class="btn small" id="btnReset">Reset</button>
          </div>

          <p class="mini" style="margin-top:10px;">
            “No more bids” sells the current player to the current highest bidder.
            “Owner: Mark Sold” does the same but requires password.
          </p>
        </div>
      </section>

      <!-- RIGHT: AUCTION VIEW -->
      <section class="panel">
        <h2>
          Live Auction
          <span class="pill" id="statusPill">Waiting…</span>
        </h2>

        <div id="auctionPane" class="hidden">
          <div class="auction-top">
            <div class="player-card" id="playerCard">
              <div class="sold-badge" id="soldBadge">SOLD</div>
              <div class="player-photo">
                <img id="playerImg" alt="Player photo" />
              </div>
              <div class="player-meta">
                <div>
                  <h3 id="playerName">Player Name</h3>
                  <div class="sub" id="playerSub">On the block</div>
                </div>

                <div class="row" style="gap:10px; align-items:stretch;">
                  <div class="stat" style="flex:1">
                    <div class="k">Current Highest Bid</div>
                    <div class="v" id="currentBid">—</div>
                  </div>
                  <div class="stat" style="flex:1">
                    <div class="k">Highest Bidder</div>
                    <div class="v small" id="currentBidder">—</div>
                  </div>
                </div>

              </div>
            </div>

            <div class="bid-box">
              <div class="stat">
                <div class="k">Players remaining</div>
                <div class="v" id="remainingPlayers">—</div>
              </div>
              <div class="stat">
                <div class="k">Sold so far</div>
                <div class="v" id="soldCount">0</div>
              </div>
              <div class="stat">
                <div class="k">Auction log</div>
                <div class="v small" id="lastAction">—</div>
              </div>
            </div>
          </div>

          <div class="teams" id="teamsWrap"></div>
        </div>

        <div id="emptyPane">
          <p class="hint" style="margin:0;">
            Use the Setup panel to start. This will generate teams and players, then begin the bidding flow.
          </p>
        </div>
      </section>

    </div>
  </main>

  <div class="toast" id="toast"></div>

  <script>
    /**********************
     * Draft Auction Arena
     * Single-file app: state + UI rendering
     **********************/

    const $ = (id) => document.getElementById(id);

    // Elements
    const setupPane = $("setupPane");
    const ownerPane = $("ownerPane");
    const auctionPane = $("auctionPane");
    const emptyPane = $("emptyPane");

    const phasePill = $("phasePill");
    const statusPill = $("statusPill");

    const playerCounterPill = $("playerCounterPill");

    const numTeamsEl = $("numTeams");
    const numPlayersEl = $("numPlayers");
    const startingBudgetEl = $("startingBudget");
    const ownerPasswordEl = $("ownerPassword");

    const btnStart = $("btnStart");
    const btnNoMoreBids = $("btnNoMoreBids");
    const btnOwnerSold = $("btnOwnerSold");
    const btnUndo = $("btnUndo");
    const btnReset = $("btnReset");

    const playerImg = $("playerImg");
    const playerName = $("playerName");
    const playerSub = $("playerSub");
    const currentBid = $("currentBid");
    const currentBidder = $("currentBidder");
    const soldBadge = $("soldBadge");

    const remainingPlayers = $("remainingPlayers");
    const soldCount = $("soldCount");
    const lastAction = $("lastAction");

    const teamsWrap = $("teamsWrap");
    const toast = $("toast");

    // App State
    const state = {
      started: false,
      ownerPassword: "",
      teams: [],      // { id, name, budget, roster: [{playerId, name, img, price}] }
      players: [],    // { id, name, img, soldToTeamId: null|id, soldPrice: number|null }
      currentIndex: 0,
      currentAuction: {
        playerId: null,
        highestBid: 0,
        highestBidderTeamId: null,
        ended: false
      },
      history: []     // undo stack for sales
    };

    // Helpers
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 1600);
    }

    function clampInt(n, min, max){
      const x = Math.floor(Number(n));
      if (Number.isNaN(x)) return min;
      return Math.max(min, Math.min(max, x));
    }

    function money(n){ return String(n); } // points/money; keep simple

    function makeTeamName(i){
      const names = ["Raptors","Warriors","Lakers","Celtics","Heat","Bulls","Suns","Spurs","Knicks","Nets","Mavericks","Hawks","Clippers","Kings","Magic","Wolves","Pacers","Rockets","Jazz","Hornets"];
      return `Team ${i+1} • ${names[i % names.length]}`;
    }

    function makePlayerName(i){
      const first = ["Jamal","Devin","Avery","Miles","Jordan","Kyrie","Anthony","Jayson","Jaylen","Tyrese","Donovan","Bam","Paolo","Zion","Cade","Shai","Luka","Giannis","Nikola","Joel","Trae","Ja","Brandon","Franz","Darius","Mikal"];
      const last  = ["Stone","Carter","Hayes","Reed","Cole","Murray","Johnson","Walker","Green","Brown","Davis","Wilson","Robinson","Young","Parker","Brooks","Bennett","Foster","Hill","Morris","Scott","Allen","Clark","Turner","Mitchell"];
      return `${first[i % first.length]} ${last[(i*3) % last.length]}`;
    }

    // Sporty placeholders (random-ish)
    function makePlayerImg(i){
      // These are just deterministic “cool” images; no external libs needed.
      // If the image host blocks hotlinking, swap to your own images folder.
      const seed = 1000 + i;
      return `https://picsum.photos/seed/hoops${seed}/600/600`;
    }

    function getCurrentPlayer(){
      const p = state.players[state.currentIndex];
      return p || null;
    }

    function isAuctionOver(){
      return state.currentIndex >= state.players.length;
    }

    function setPhase(text){
      phasePill.textContent = text;
    }
    function setStatus(text){
      statusPill.textContent = text;
    }

    /**********************
     * Core Actions
     **********************/

    function startAuction(){
      const numTeams = clampInt(numTeamsEl.value, 2, 20);
      const numPlayers = clampInt(numPlayersEl.value, 1, 300);
      const startingBudget = clampInt(startingBudgetEl.value, 1, 1000000);
      const pw = ownerPasswordEl.value.trim();

      if (!pw){
        showToast("Set an owner password first.");
        ownerPasswordEl.focus();
        return;
      }

      state.started = true;
      state.ownerPassword = pw;
      state.teams = Array.from({length:numTeams}, (_,i)=>({
        id: `t${i+1}`,
        name: makeTeamName(i),
        budget: startingBudget,
        roster: []
      }));
      state.players = Array.from({length:numPlayers}, (_,i)=>({
        id: `p${i+1}`,
        name: makePlayerName(i),
        img: makePlayerImg(i),
        soldToTeamId: null,
        soldPrice: null
      }));
      state.currentIndex = 0;
      state.history = [];

      beginNextPlayer();
      renderAll();

      setupPane.classList.add("hidden");
      ownerPane.classList.remove("hidden");
      auctionPane.classList.remove("hidden");
      emptyPane.classList.add("hidden");

      setPhase("Live");
      setStatus("Bidding open");
      showToast("Auction started!");
    }

    function beginNextPlayer(){
      if (isAuctionOver()){
        state.currentAuction = {
          playerId: null,
          highestBid: 0,
          highestBidderTeamId: null,
          ended: true
        };
        setStatus("Auction finished");
        return;
      }
      const player = getCurrentPlayer();
      state.currentAuction = {
        playerId: player.id,
        highestBid: 0,
        highestBidderTeamId: null,
        ended: false
      };
    }

    function placeBid(teamId, amount){
      if (!state.started) return;
      if (isAuctionOver()) { showToast("Auction finished."); return; }
      if (state.currentAuction.ended) { showToast("This player is already sold."); return; }

      const team = state.teams.find(t=>t.id===teamId);
      const player = getCurrentPlayer();
      if (!team || !player) return;

      const bid = Math.floor(Number(amount));
      if (!Number.isFinite(bid) || bid <= 0){
        showToast("Enter a valid bid.");
        return;
      }

      const minBid = state.currentAuction.highestBid + 1;
      if (bid < minBid){
        showToast(`Bid must be at least ${minBid}.`);
        return;
      }
      if (bid > team.budget){
        showToast("Not enough budget for that bid.");
        return;
      }

      state.currentAuction.highestBid = bid;
      state.currentAuction.highestBidderTeamId = teamId;

      lastAction.textContent = `${team.name} bids ${money(bid)} for ${player.name}`;
      renderAuctionHeader();
      showToast("Bid placed!");
    }

    function finalizeSale(reason){
      if (!state.started) return;
      if (isAuctionOver()) { showToast("Auction finished."); return; }

      const player = getCurrentPlayer();
      if (!player) return;

      const { highestBid, highestBidderTeamId } = state.currentAuction;

      if (!highestBidderTeamId || highestBid <= 0){
        showToast("No bids yet. Get at least 1 bid before selling.");
        return;
      }

      const team = state.teams.find(t=>t.id===highestBidderTeamId);
      if (!team) return;

      // Deduct budget
      if (highestBid > team.budget){
        showToast("Highest bidder no longer has enough budget.");
        return;
      }

      // Record undo history
      state.history.push({
        type: "sale",
        playerIndex: state.currentIndex,
        playerId: player.id,
        teamId: team.id,
        price: highestBid
      });

      // Apply sale
      team.budget -= highestBid;
      team.roster.push({
        playerId: player.id,
        name: player.name,
        img: player.img,
        price: highestBid
      });
      player.soldToTeamId = team.id;
      player.soldPrice = highestBid;

      state.currentAuction.ended = true;
      soldBadge.classList.add("show");
      playerSub.textContent = `Sold to ${team.name} for ${money(highestBid)} (${reason})`;
      lastAction.textContent = `SOLD: ${player.name} → ${team.name} for ${money(highestBid)} (${reason})`;

      // Move to next player after short delay
      setTimeout(() => {
        state.currentIndex += 1;
        beginNextPlayer();
        renderAll();
        if (!isAuctionOver()){
          showToast("Next player on the block.");
        } else {
          setStatus("Auction finished");
          showToast("Auction finished!");
        }
      }, 500);
    }

    function ownerFinalizeSale(){
      if (!state.started) return;
      if (isAuctionOver()) { showToast("Auction finished."); return; }

      const input = prompt("Owner password:");
      if (input === null) return; // cancelled
      if (input !== state.ownerPassword){
        showToast("Wrong password.");
        return;
      }
      finalizeSale("owner");
    }

    function undoLastSale(){
      if (!state.started) return;
      const last = state.history.pop();
      if (!last){
        showToast("Nothing to undo.");
        return;
      }
      if (last.type !== "sale"){
        showToast("Unknown history item.");
        return;
      }

      const player = state.players.find(p=>p.id===last.playerId);
      const team = state.teams.find(t=>t.id===last.teamId);
      if (!player || !team){
        showToast("Undo failed (missing data).");
        return;
      }

      // Remove from roster
      const idx = team.roster.findIndex(r=>r.playerId===player.id && r.price===last.price);
      if (idx >= 0) team.roster.splice(idx, 1);

      // Refund
      team.budget += last.price;

      // Reset player
      player.soldToTeamId = null;
      player.soldPrice = null;

      // Go back to that player
      state.currentIndex = last.playerIndex;
      beginNextPlayer();

      lastAction.textContent = `UNDO: Reopened bidding for ${player.name}`;
      setStatus("Bidding open");
      showToast("Last sale undone.");
      renderAll();
    }

    function resetAll(){
      if (!confirm("Reset the entire auction?")) return;
      // Hard reset
      state.started = false;
      state.ownerPassword = "";
      state.teams = [];
      state.players = [];
      state.currentIndex = 0;
      state.history = [];
      state.currentAuction = { playerId:null, highestBid:0, highestBidderTeamId:null, ended:true };

      // UI reset
      setupPane.classList.remove("hidden");
      ownerPane.classList.add("hidden");
      auctionPane.classList.add("hidden");
      emptyPane.classList.remove("hidden");

      soldBadge.classList.remove("show");

      setPhase("Not started");
      setStatus("Waiting…");
      showToast("Reset complete.");
      renderAll();
    }

    /**********************
     * Rendering
     **********************/

    function renderAuctionHeader(){
      const player = getCurrentPlayer();
      if (!player){
        playerName.textContent = "—";
        playerSub.textContent = "—";
        currentBid.textContent = "—";
        currentBidder.textContent = "—";
        playerImg.src = "";
        soldBadge.classList.remove("show");
        return;
      }

      playerImg.src = player.img;
      playerName.textContent = player.name;

      // If player already sold (shouldn't be current normally, but handle)
      if (player.soldToTeamId){
        const team = state.teams.find(t=>t.id===player.soldToTeamId);
        soldBadge.classList.add("show");
        playerSub.textContent = `Sold to ${team ? team.name : "Unknown"} for ${money(player.soldPrice)}`;
      } else {
        soldBadge.classList.remove("show");
        playerSub.textContent = "On the block — place your bids";
      }

      const hb = state.currentAuction.highestBid;
      const bidder = state.currentAuction.highestBidderTeamId
        ? state.teams.find(t=>t.id===state.currentAuction.highestBidderTeamId)?.name
        : null;

      currentBid.textContent = hb > 0 ? money(hb) : "—";
      currentBidder.textContent = bidder || "—";

      const remaining = Math.max(0, state.players.length - state.currentIndex);
      remainingPlayers.textContent = String(remaining);
      soldCount.textContent = String(state.players.filter(p=>p.soldToTeamId).length);
      playerCounterPill.textContent = `Player ${Math.min(state.currentIndex+1, state.players.length)}/${state.players.length}`;
    }

    function renderTeams(){
      teamsWrap.innerHTML = "";

      state.teams.forEach((team, idx) => {
        const card = document.createElement("div");
        card.className = "team-card";

        const head = document.createElement("div");
        head.className = "team-head";

        const name = document.createElement("div");
        name.className = "team-name";
        name.innerHTML = `<span class="team-dot"></span><span>${team.name}</span>`;

        const wallet = document.createElement("div");
        wallet.className = "wallet";
        wallet.innerHTML = `Wallet: <strong>${money(team.budget)}</strong>`;

        head.appendChild(name);
        head.appendChild(wallet);

        const bidRow = document.createElement("div");
        bidRow.className = "bid-row";

        const bidInput = document.createElement("input");
        bidInput.type = "number";
        bidInput.min = "1";
        bidInput.placeholder = "Bid amount";
        bidInput.inputMode = "numeric";

        const bidBtn = document.createElement("button");
        bidBtn.className = "btn primary";
        bidBtn.textContent = "Bid";

        bidBtn.addEventListener("click", () => placeBid(team.id, bidInput.value));
        bidInput.addEventListener("keydown", (e) => {
          if (e.key === "Enter") placeBid(team.id, bidInput.value);
        });

        bidRow.appendChild(bidInput);
        bidRow.appendChild(bidBtn);

        const roster = document.createElement("div");
        roster.className = "roster";

        const rosterTitle = document.createElement("h4");
        rosterTitle.textContent = "Roster";
        roster.appendChild(rosterTitle);

        if (team.roster.length === 0){
          const empty = document.createElement("div");
          empty.className = "mini";
          empty.textContent = "No players yet.";
          roster.appendChild(empty);
        } else {
          team.roster.forEach(r => {
            const chip = document.createElement("div");
            chip.className = "chip";
            chip.innerHTML = `
              <img src="${r.img}" alt="" />
              <span title="${r.name}" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${r.name}</span>
              <span class="price">${money(r.price)}</span>
            `;
            roster.appendChild(chip);
          });
        }

        card.appendChild(head);
        card.appendChild(bidRow);
        card.appendChild(roster);

        teamsWrap.appendChild(card);
      });
    }

    function renderAll(){
      if (!state.started){
        setPhase("Not started");
        setStatus("Waiting…");
        return;
      }
      if (isAuctionOver()){
        setStatus("Auction finished");
      } else {
        setStatus("Bidding open");
      }
      renderAuctionHeader();
      renderTeams();
    }

    /**********************
     * Wiring
     **********************/
    btnStart.addEventListener("click", startAuction);
    btnNoMoreBids.addEventListener("click", () => finalizeSale("normal"));
    btnOwnerSold.addEventListener("click", ownerFinalizeSale);
    btnUndo.addEventListener("click", undoLastSale);
    btnReset.addEventListener("click", resetAll);

    // Initial UI
    setPhase("Not started");
    setStatus("Waiting…");
    lastAction.textContent = "—";
  </script>
</body>
</html>
message.txt
32 KB
